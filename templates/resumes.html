{% extends "base.html" %}
{% block title %}Resumes - Job Assistant{% endblock %}

{% block content %}
<h1>ðŸ“„ Resume Management</h1>

<div style="margin: 2rem 0;">
    <h2>Upload New Resume</h2>
    <form action="/upload_resume" method="POST" enctype="multipart/form-data">
        <div class="form-group">
            <label for="resume">Resume File (PDF, DOC, DOCX, TXT)</label>
            <input type="file" name="resume" id="resume" required accept=".pdf,.doc,.docx,.txt">
        </div>
        
        <div class="form-group">
            <label for="resume_name">Resume Name</label>
            <input type="text" name="resume_name" id="resume_name" placeholder="e.g., Software Engineer Resume">
        </div>
        
        <div class="form-group">
            <label for="description">Description (Optional)</label>
            <textarea name="description" id="description" placeholder="Brief description of this resume version..."></textarea>
        </div>
        
        <button type="submit" class="btn">ðŸ“¤ Upload Resume</button>
    </form>
</div>

<div style="margin-top: 3rem;">
    <h2>Your Resumes</h2>
    {% if resumes %}
        <table>
            <thead>
                <tr>
                    <th>Name</th>
                    <th>Description</th>
                    <th>Uploaded</th>
                    <th>Default</th>
                    <th>Actions</th>
                </tr>
            </thead>
            <tbody>
                {% for resume in resumes %}
                <tr>
                    <td><strong>{{ resume.name }}</strong></td>
                    <td>{{ resume.description or '-' }}</td>
                    <td>{{ resume.created_date[:10] if resume.created_date else '-' }}</td>
                    <td>
                        {% if resume.is_default %}
                            âœ… Default
                        {% else %}
                            <a href="/set_default_resume/{{ resume.id }}" class="btn btn-secondary" style="padding: 0.25rem 0.5rem;">Set Default</a>
                        {% endif %}
                    </td>
                    <td>
                        <a href="/delete_resume/{{ resume.id }}" class="btn btn-danger" style="padding: 0.25rem 0.5rem;" onclick="return confirm('Are you sure?')">Delete</a>
                    </td>
                </tr>
                {% endfor %}
            </tbody>
        </table>
    {% else %}
        <p>No resumes uploaded yet. Upload your first resume above!</p>
    {% endif %}
</div>
{% endblock %}